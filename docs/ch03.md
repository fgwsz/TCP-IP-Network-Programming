# 第三章 地址族与数据序列
本章重点讲解给套接字分配`IP`地址和端口号.
## 3.1 分配给套接字的`IP`地址与端口号
`IP`是`Internet Protocol`(网络协议)的简写.
为了收发数据而`分配给计算机的值`.

`端口号`是为了区分程序中创建的套接字而`分配给套接字的序号`.
### 网络地址(`Internet Address`)
`IP`地址分为2类:
1. `IPv4`(`Internet Protocol version 4`) `4`字节地址族
2. `IPv6`(`Internet Protocol version 6`) `6`字节地址族

`IPv4`与`IPv6`的差别主要是`IP`地址所用的字节数.

`IPv6`是为了应对`IPv4`地址耗尽问题而提出的标准.

`IPv4`标准的4字节`IP`地址包含网络地址和主机(指的是计算机本身)地址,
且分为`A`,`B`,`C`,`D`,`E`等类型,`E`类地址一般不会被使用,先略去不讲.
### `IPv4`地址族
```txt
A类  [1字节|1字节|1字节|1字节]
      \_ _/ \_______ _______/
        V           V
     网络ID      主机ID

B类  [1字节|1字节|1字节|1字节]
      \____ ____/ \____ ____/
           V           V
        网络ID      主机ID

C类  [1字节|1字节|1字节|1字节]
      \_______ _______/ \_ _/
              V           V
           网络ID      主机ID

D类  [1字节|1字节|1字节|1字节]
      \__________ __________/
                 V
            多播IP地址
```
### 基于`IP`地址的数据传递过程
```txt
                                        +-----MID.COM 203.211.172-----------+
                                        |                                   |
                                        |         [103号计算机]             |
                                        |               ^                   |
        +向203.211.172.103传输的数据->[路由器]----+-----+---------+         |
        |                               |         V               V         |
        |                               |    [102号计算机]  [104号计算机]   |
        |                               +-----------------------------------+
[计算机]+                                                                    
        |                               +-----SEMI.COM 203.211.217----------+
        |                               |                                   |
        |                               |    [201号计算机]  [203号计算机]   |
        |                               |         ^               ^         |
        +向203.211.217.202传输的数据->[路由器]----+-----+---------+         |
                                        |               V                   |
                                        |         [202号计算机]             |
                                        +-----------------------------------+
```
某主机向`203.211.172.103`和`203.211.217.202`传输数据,
其中`203.211.172`和`203.211.217`为该网络的网络地址.

`向相应网络传输数据`实际上是向构成网络的路由器(`Router`)或交换机(`Switch`)
传递数据,由接收数据的路由器根据数据中的主机地址向目标主机传递数据.

#### 路由器和交换机
构建网络的过程中需要一种物理设备完成外网和本网主机之间的连接.
完成连接并进行数据交换的便是路由器或交换机.

它们实际上是一种计算机,交换机比路由器功能要简单一些.
### 网络地址分类与主机地址边界
